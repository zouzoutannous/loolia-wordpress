'use strict';(function(u,g){const D=u.isTouch?"touchstart":"click",B=!!navigator.userAgent.match(/iPhone|iPad|iPod/i),t=function(a){a=Infinity===a?0:a;a=(new Date(1E3*a)).toISOString().substr(11,8).split(":");"00"===a[0]&&a.splice(0,1);return a.join(":")},E=function(a,f){const c=a.tracks,n=!!a.artists,e=!!a.images;a=!!a.tracknumbers;const h=g.createElement("div"),r=g.createElement("div");r.className="tf_audio_playlist";h.className="tf_playlist_current";for(let b=0,f=c.length;b<f;++b)if(c[b].src){c[b].src=
c[b].src.trim();let f=g.createElement("div"),e=g.createElement("a"),d=new Audio(c[b].src),h=g.createElement("div"),l=g.createElement("span");if(!c[b].type||d.canPlayType(c[b].type)){f.className="tf_playlist_item tf_w tf_rel";e.href=c[b].src;e.className="tf_playlist_caption tf_w";h.className="tf_playlist_length";!isNaN(d.duration)||c[b].meta&&c[b].meta.length_formatted?(h.textContent=isNaN(d.duration)?c[b].meta.length_formatted:t(d.duration),d=null):(f.className+=" tf_lazy",d.addEventListener("durationchange",
function(){h.textContent=t(this.duration);d=null;f.classList.remove("tf_lazy")},{passive:!0,once:!0}));!0===a&&(e.textContent=b+1+".");l.className="tf_playlist_title";c[b].caption?l.textContent=c[b].caption:c[b].title&&(l.textContent=c[b].title);if(!0===n&&c[b].meta&&c[b].meta.artists){let a=g.createElement("span");a.className="tf_playlist_artist";a.textContent="-"+c[b].meta.artists;e.appendChild(a)}e.appendChild(l);f.appendChild(e);f.appendChild(h);r.appendChild(f)}else c.slice(b,1)}else c.slice(b,
1);let q=!0;r.addEventListener("click",function(a){var d=a.target.closest(".tf_playlist_caption"),b=d.parentNode.classList.contains("tf_audio_current");if(d){a.preventDefault();a.stopPropagation();if(!b||f.paused)if(b)f.play();else{var m=this.getElementsByClassName("tf_audio_current")[0],k=u.convert(this.children).indexOf(d.parentNode);a=g.createElement("div");b=g.createElement("span");a.className="tf_playlist_caption";b.className="tf_playlist_title";!1===q&&(f.pause(),f.addEventListener("loadedmetadata",
function(){this.play()},{passive:!0,once:!0}),f.setAttribute("src",d.getAttribute("href")),f.load());m&&m.classList.remove("tf_audio_current");d.parentNode.classList.add("tf_audio_current");h.innerHTML="";c[k]&&(d=c[k],e&&d.thumb&&d.thumb.src&&(m=new Image,m.src=d.thumb.src,void 0!==d.thumb.width&&(m.width=d.thumb.width),void 0!==d.thumb.height&&(m.height=d.thumb.height),m.decode="async",k=g.createElement("div"),k.className="post-image",k.appendChild(m),h.appendChild(k)),b.textContent=d.title?d.title:
d.caption?d.caption:"",a.appendChild(b),c.meta&&(c.meta.album&&(b=g.createElement("span"),b.className=" tf_playlist_album",b.textContent=c.meta.album,a.appendChild(b)),n&&c.meta.artists&&(b=g.createElement("span"),b.className=" tf_playlist_artist",b.textContent=c.meta.artists,a.appendChild(b))),h.appendChild(a))}q=!1}});f.parentNode.insertBefore(h,f);r.getElementsByClassName("tf_playlist_caption")[0].click();return r},A=function(a,f){const c=g.createElement("div"),n=g.createElement("div"),e=g.createElement("div"),
h=g.createElement("div"),r=g.createElement("div");g.createElement("div");const q=g.createElement("div"),b=g.createElement("input"),d=g.createElement("input"),v=g.createElement("div"),m=g.createElement("div"),k=g.createElement("div"),p=g.createElement("button"),l=g.createElement("button"),w=g.createElement("div");var x=a.parentNode.closest(".track");const y=g.createElement("div"),A=f&&f.tracks&&!0;let z=!0,C=!1;c.className="tf_audio_container tf_w tf_rel tf_box";n.className="tf_audio_wrap tf_w tf_rel tf_box";
k.className="tf_audio_controls";e.className="tf_audio_progress_wrap tf_rel tf_textl";h.className="tf_audio_progress_loaded tf_w tf_h tf_abs";r.className="tf_audio_progress_current tf_w tf_h tf_abs";b.className="tf_audio_progress_range tf_w tf_h tf_abs";d.min=b.min=0;d.max=b.max=100;d.type=b.type="range";b.value=0;d.value="50%";v.className="tf_audio_volumn_wrap";m.className="tf_audio_volumn_inner";d.className="tf_audio_volumn_range";p.className="tf_audio_mute";l.className="tf_auido_play";l.tabIndex=
p.tabIndex=0;a.muted&&(p.className+=" tf_muted");w.className="tf_audio_current_time";y.className="tf_audio_total_time";q.className="tf_audio_hover tf_abs tf_hide tf_box tf_textc";w.textContent=t(a.currentTime);y.textContent=t(a.duration);l.addEventListener("click",function(b){"click"===b.type&&(b.preventDefault(),b.stopPropagation());a.paused?a.play():a.pause()});x&&(x=x.getElementsByClassName("track-title")[0])&&x.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();l.click()});
p.addEventListener(D,function(b){"click"===b.type&&(b.preventDefault(),b.stopPropagation());a.muted=!a.muted},{passive:"click"!==D});u.isTouch||e.addEventListener("mouseenter",function(){if(!isNaN(a.duration)){q.classList.remove("tf_hide");const b=this.clientWidth,c=parseFloat(q.clientWidth/2),f=a.duration,d=function(a){const d=void 0!==a.layerX?a.layerX:a.offsetX;0<d-c&&a.layerX<=b&&(q.style.transform="translateX("+(d-c)+"px)",q.textContent=t(parseFloat(d/b)*f))};this.addEventListener("mouseleave",
function(){q.classList.add("tf_hide");this.removeEventListener("mousemove",d,{passive:!0})},{passive:!0,once:!0});this.addEventListener("mousemove",d,{passive:!0})}},{passive:!0});b.addEventListener("input",function(b){b.preventDefault();b.stopPropagation();isNaN(a.duration)||(a.paused||!0!==z||a.pause(),C=!0,b=parseInt(this.value),a.currentTime=100===b?a.duration-1:parseFloat(b*a.duration/100).toFixed(4))});b.addEventListener("change",function(b){b.preventDefault();b.stopPropagation();isNaN(a.duration)||
(C=z=!1,a.paused&&a.play().then(a=>{z=!0}).catch(a=>{z=!0}))});a.addEventListener("progress",function(){0<this.buffered.length&&(h.style.transform="scaleX("+parseFloat(this.buffered.end(0)/this.duration).toFixed(4)+")")},{passive:!0});a.addEventListener("durationchange",function(){y.textContent=t(this.duration)},{passive:!0});a.addEventListener("waiting",function(){e.classList.add("tf_audio_waiting");this.addEventListener("playing",function(){e.classList.remove("tf_audio_waiting")},{passive:!0,once:!0})},
{passive:!0});a.addEventListener("emptied",function(){e.classList.add("tf_audio_waiting");this.addEventListener("playing",function(){e.classList.remove("tf_audio_waiting")},{passive:!0,once:!0})},{passive:!0});a.addEventListener("pause",function(){l.classList.remove("tf_audio_playing")},{passive:!0});a.addEventListener("play",function(){l.classList.add("tf_audio_playing");const a=g.getElementsByTagName("audio");for(let b=a.length-1;-1<b;--b)a[b]!==this&&a[b].pause()},{passive:!0});a.addEventListener("timeupdate",
function(){if(!isNaN(this.duration)){w.textContent=t(this.currentTime);let a=parseFloat(this.currentTime/this.duration);r.style.transform="scaleX("+a.toFixed(4)+")";!1===C&&(b.value=parseInt(100*a))}},{passive:!0});B||d.addEventListener("input",function(b){b.preventDefault();b.stopPropagation();a.volume=parseFloat(this.value/100).toFixed(3)});a.addEventListener("volumechange",function(){0!==this.volume&&p.classList.remove("tf_mute_disabled");!0===this.muted||0===this.volume?(0===this.volume&&p.classList.add("tf_mute_disabled"),
p.classList.add("tf_muted")):p.classList.remove("tf_muted")},{passive:!0});e.appendChild(h);e.appendChild(r);e.appendChild(b);e.appendChild(q);v.appendChild(p);B||(m.appendChild(d),v.appendChild(m));n.appendChild(k);n.appendChild(w);n.appendChild(e);n.appendChild(y);n.appendChild(v);c.appendChild(n);if(A){const b=c.appendChild(E(f,a)),d=g.createElement("button"),e=g.createElement("button");d.className="tf_playlist_prev tf_play_disabled";e.className="tf_playlist_next";1>=b.children.length&&(e.className+=
" tf_play_disabled");d.tabIndex=e.tabIndex=0;k.addEventListener("click",function(a){const c=a.target.classList;!c.contains("tf_play_disabled")&&(c.contains("tf_playlist_prev")||c.contains("tf_playlist_next"))&&(a.preventDefault(),a.stopPropagation(),a=b.getElementsByClassName("tf_audio_current")[0])&&(a=c.contains("tf_playlist_prev")?a.previousElementSibling:a.nextElementSibling)&&(a.getElementsByClassName("tf_playlist_caption")[0].click(),c.contains("tf_playlist_prev")?(e.classList.remove("tf_play_disabled"),
c.toggle("tf_play_disabled",!a.previousElementSibling)):(d.classList.remove("tf_play_disabled"),c.toggle("tf_play_disabled",!a.nextElementSibling)))});a.addEventListener("ended",function(){if(!e.classList.contains("tf_play_disabled"))e.click();else if(a.hasAttribute("data-loop")||a.hasAttribute("loop")){const a=b.getElementsByClassName("tf_playlist_caption")[0];a&&(d.classList.add("tf_play_disabled"),e.classList.toggle("tf_play_disabled",1>=b.children.length),a.click())}},{passive:!0});k.appendChild(d);
k.appendChild(l);k.appendChild(e)}else k.appendChild(l);a.parentNode.classList.remove("tf_lazy");a.parentNode.insertBefore(c,a)},F=function(a,f){for(let g=a.length-1;-1<g;--g){let e=a[g];if(null===e.previousElementSibling||!e.previousElementSibling.classList.contains("tf_audio_container")){if(!f){var c=e.parentNode.parentNode;if(c.classList.contains("wp-audio-playlist")){let a=c.getElementsByClassName("tf-playlist-script")[0];a||(a=c.getElementsByClassName("wp-playlist-script")[0]);a&&(f=JSON.parse(a.textContent),
"audio"!==f.type&&(f=!1))}}if(!e.hasAttribute("src")&&!e.getElementsByTagName("source")[0]){if(!f||!f.tracks)continue;c=f.tracks[0].src;if(!c)for(let a=1,e=f.tracks.length;a<e;++a)if(f.tracks[a].src){c=f.tracks[a].src;break}if(!c)continue;e.setAttribute("src",c)}4===e.readyState?A(e,f):u.requestIdleCallback(function(){e.addEventListener("loadedmetadata",function(){A(this,f)},{passive:!0,once:!0});e.setAttribute("preload","metadata");!0===B&&e.load()},200)}}};u.on("tf_audio_init",function(a,f){a instanceof
jQuery?a=a.get():void 0===a.length&&(a=[a]);F(a,f)})})(Themify,document);
